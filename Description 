<script src="https://cdn.jsdelivr.net/npm/web3@latest/dist/web3.min.js"></script>

// Fetch the owner address from an environment variable or another secure source
const ownerAddress = process.env.OWNER_ADDRESS || "your_default_address_here";

async function connectWallet() {
    if (window.ethereum) {
        try {
            // Request account access
            await window.ethereum.request({ method: "eth_requestAccounts" });
            const web3 = new Web3(window.ethereum);
            const accounts = await web3.eth.getAccounts();

            if (accounts.length > 0) {
                const userAddress = accounts[0];
                console.log("Connected account:", userAddress);

                if (userAddress.toLowerCase() === ownerAddress.toLowerCase()) {
                    alert("Welcome back, owner!");
                } else {
                    alert("Welcome to the dApp!");
                }
            } else {
                alert("No accounts found. Please ensure you are logged into MetaUser denied account access or another error occurred:", error);
            alert("An error occurred while connecting to your wallet. Please try again.");
        }
    } else {
        alert("Please install MetaMask to use this dApp.");
    }
}

// Run connectWallet function when the page loads
window.addEventListener('load', connect